<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Language Lens (Sample)</title>
    <!-- Dispositions Explainer Modal -->
    <div class="modal-overlay" id="dispositionsModal">
        <div class="modal-content">
            <div class="modal-inner">
                <button class="modal-close" onclick="closeDispositionsModal()">&times;</button>
                
                <h2 style="color: #1e3a5f; font-size: 1.75rem; font-weight: 700; margin-bottom: 1rem; clear: both;">
                    Three Ways to Think About Texts
                </h2>
                
                <p style="color: #475569; line-height: 1.7; margin-bottom: 2rem; font-size: 1.05rem;">
                    When analysing language and literature, expert readers don't just look at what's on the page‚Äîthey shift between different ways of thinking. The Language Lens helps you develop three powerful thinking dispositions that writers, critics, and scholars use to understand texts deeply.
                </p>

                <div style="background: #f8fafc; border-left: 4px solid #1e3a5f; padding: 1.25rem; margin-bottom: 1.25rem; border-radius: 0.5rem;">
                    <div style="color: #1e3a5f; font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">
                        üëÅÔ∏è Pay Attention: Notice the Details
                    </div>
                    <div style="color: #334155; line-height: 1.6; font-size: 0.95rem;">
                        What's actually there? What patterns, words, or techniques stand out? This is about careful observation‚Äîspotting what the writer is doing before you interpret why.
                    </div>
                </div>

                <div style="background: #f8fafc; border-left: 4px solid #1e3a5f; padding: 1.25rem; margin-bottom: 1.25rem; border-radius: 0.5rem;">
                    <div style="color: #1e3a5f; font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">
                        üí≠ Use Your Imagination: Explore Possibilities
                    </div>
                    <div style="color: #334155; line-height: 1.6; font-size: 0.95rem;">
                        How does this make you feel? What images come to mind? What connections or memories does it spark? This is about engaging personally with the text and visualising its effects.
                    </div>
                </div>

                <div style="background: #f8fafc; border-left: 4px solid #1e3a5f; padding: 1.25rem; margin-bottom: 1.25rem; border-radius: 0.5rem;">
                    <div style="color: #1e3a5f; font-weight: 700; font-size: 1.1rem; margin-bottom: 0.5rem;">
                        üîç Think Critically: Analyse the Why
                    </div>
                    <div style="color: #334155; line-height: 1.6; font-size: 0.95rem;">
                        Why did the writer make this choice? What effect does it create? What's the purpose or impact? What biases are revealed? This is about questioning and understanding the craft behind the writing.
                    </div>
                </div>

                <div style="background: #e0f2fe; border: 1px solid #0c4a6e; padding: 1.25rem; border-radius: 0.5rem; margin: 1.5rem 0;">
                    <div style="color: #0c4a6e; font-weight: 700; margin-bottom: 0.5rem; font-size: 1rem;">
                        üí° The Learning Move
                    </div>
                    <div style="color: #334155; line-height: 1.6; font-size: 0.95rem;">
                        When you're stuck analysing a text, try switching dispositions. If careful observation isn't revealing much, engage your imagination. If you're lost in an imaginative world, shift to critical analysis. Expert readers move fluidly between these ways of thinking.
                    </div>
                </div>

                <p style="color: #64748b; font-size: 0.9rem; line-height: 1.6; margin-top: 1.5rem; font-style: italic;">
                    These dispositions are part of the Learner Threads approach, helping you develop the thinking habits of experts in any field.
                </p>

                <div style="margin-top: 2rem; padding-top: 1.5rem; border-top: 1px solid #e2e8f0;">
                    <button onclick="closeDispositionsModal()" style="background: #1e3a5f; color: white; border: none; padding: 0.875rem 2rem; border-radius: 0.5rem; font-size: 1rem; font-weight: 600; cursor: pointer; width: 100%; transition: all 0.2s;">
                        Got it!
                    </button>
                </div>
            </div>
        </div>
    </div>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(to bottom, #f8f9fa, #e9ecef);
            min-height: 100vh;
            padding: 2rem;
            color: #2c3e50;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        /* --- Global Header & Footer Styles --- */
        .global-header {
            margin-bottom: 2.5rem;
            padding: 1rem 0;
            border-bottom: 1px solid #e2e8f0;
        }

        .global-nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            text-decoration: none;
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e3a5f;
        }

        .logo-link img {
            max-height: 40px;
            border-radius: 50%;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
        }

        .nav-links a {
            text-decoration: none;
            color: #475569;
            font-weight: 500;
            transition: color 0.2s;
        }

        .nav-links a:hover {
            color: #1e3a5f;
        }

        .global-footer {
            text-align: center;
            margin-top: 3rem;
            padding-top: 2rem;
            border-top: 1px solid #e2e8f0;
        }

        .global-footer p {
            color: #64748b;
            font-size: 0.9rem;
        }

        .global-footer a {
            color: #1e3a5f;
            text-decoration: none;
        }

        .global-footer a:hover {
            text-decoration: underline;
        }

        /* --- Page Header Styles --- */
        .page-header {
            background: white;
            padding: 2.5rem 3rem;
            border-radius: 0.5rem;
            margin-bottom: 2.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
        }

        h1 {
            color: #1e3a5f;
            font-size: 2.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            letter-spacing: -0.02em;
        }

        .subtitle {
            color: #64748b;
            font-size: 1.05rem;
            margin-bottom: 2rem;
            font-weight: 400;
        }

        .upgrade-prompt {
            background: #fffbf5; 
            border: 1px solid #fde8cc; 
            padding: 1rem; 
            border-radius: 0.5rem; 
            text-align: center;
            margin-bottom: 2rem;
        }
        .upgrade-prompt p {
            margin:0; 
            font-size: 0.95rem;
        }
        .upgrade-prompt a {
            color: #1e3a5f;
            font-weight: 600;
        }

        .controls {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            align-items: center;
        }

        .search-box {
            flex: 1 1 auto;
            min-width: 250px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 0.875rem 1.25rem 0.875rem 3rem;
            border: 1.5px solid #e2e8f0;
            border-radius: 0.375rem;
            font-size: 1rem;
            transition: all 0.2s;
            background: #f8fafc;
        }

        .search-box input:focus {
            outline: none;
            border-color: #1e3a5f;
            background: white;
            box-shadow: 0 0 0 3px rgba(30, 58, 95, 0.1);
        }

        .search-icon {
            position: absolute;
            left: 1rem;
            top: 50%;
            transform: translateY(-50%);
            color: #64748b;
            font-size: 1.1rem;
        }

        .filter-controls {
            display: flex;
            gap: 0.75rem;
            flex-wrap: wrap;
        }

        .category-filter {
            padding: 0.75rem 1.25rem;
            border: 1.5px solid #e2e8f0;
            border-radius: 0.375rem;
            background: white;
            color: #475569;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
        }

        .category-filter:hover {
            border-color: #1e3a5f;
            background: #f8fafc;
        }

        .category-filter.active {
            background: #1e3a5f;
            color: white;
            border-color: #1e3a5f;
        }

        .mode-toggle {
            background: #1e3a5f;
            color: white;
            border: none;
            padding: 0.875rem 1.75rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.95rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
            text-decoration: none;
        }

        .mode-toggle.premium-feature {
            background: #f1f5f9;
            color: #64748b;
            border: 1.5px solid #e2e8f0;
            cursor: pointer;
        }
        .mode-toggle.premium-feature:hover {
            background: #e2e8f0;
            color: #1e3a5f;
            transform: translateY(-1px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .help-btn {
            background: #64748b;
            color: white;
            border: none;
            padding: 0.875rem 1.5rem;
            border-radius: 0.375rem;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .help-btn:hover {
            background: #475569;
            transform: translateY(-1px);
        }

        /* Daily Quote Section - Collapsible */
        .daily-quote-section {
            background: white;
            padding: 1.5rem 3rem;
            border-radius: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
            transition: all 0.3s ease-in-out;
            margin-bottom: 2.5rem;
        }

        .collapsible-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            color: #1e3a5f;
        }
        .collapsible-header span:first-child {
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: -0.01em;
        }

        .toggle-icon {
            transition: transform 0.3s ease;
            font-size: 1.2rem;
            color: #64748b;
        }

        .daily-quote-section.expanded .toggle-icon {
            transform: rotate(180deg);
        }

        .collapsible-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.4s ease-out;
        }

        .daily-quote-section.expanded .collapsible-content {
            max-height: 2000px;
            transition: max-height 0.5s ease-in;
            padding-top: 1.5rem;
            border-top: 1px solid #e2e8f0;
            margin-top: 1.5rem;
        }
        
        .quote-content {
            margin-bottom: 2rem;
        }

        .daily-quote-section blockquote {
            font-size: 1.25rem;
            font-style: italic;
            color: #334155;
            border-left: 4px solid #1e3a5f;
            padding-left: 1.5rem;
            margin: 0 0 1rem 0;
            line-height: 1.6;
        }

        .daily-quote-section cite {
            display: block;
            text-align: right;
            color: #64748b;
            font-style: normal;
            font-weight: 500;
            font-size: 0.95rem;
        }
        
        .technique-tags {
            margin-bottom: 1.5rem;
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .technique-tag-link {
            font-size: 0.75rem;
            color: #64748b;
            background: #f1f5f9;
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s;
        }
        .technique-tag-link:hover {
            background: #e2e8f0;
            color: #1e3a5f;
        }
        
        .gallery {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(400px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: white;
            border-radius: 0.5rem;
            padding: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            transition: all 0.3s;
            cursor: pointer;
        }

        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
        }

        .feature-name {
            color: #1e3a5f;
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 1.25rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            letter-spacing: -0.01em;
        }
        
        .is-sample .bookmark-btn {
            display: none;
        }

        .bookmark-btn {
            background: none;
            border: none;
            font-size: 1.35rem;
            cursor: pointer;
            opacity: 0.2;
            transition: opacity 0.2s;
            padding: 0.25rem;
        }

        .bookmark-btn:hover {
            opacity: 0.6;
        }

        .bookmark-btn.active {
            opacity: 1;
            color: #1e3a5f;
        }

        .category-tag {
            display: inline-block;
            font-size: 0.75rem;
            color: #64748b;
            background: #f1f5f9;
            padding: 0.25rem 0.75rem;
            border-radius: 0.25rem;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .definition {
            color: #475569;
            margin-bottom: 1.25rem;
            line-height: 1.7;
            font-size: 0.975rem;
        }

        .example {
            font-style: italic;
            color: #64748b;
            margin-bottom: 1.5rem;
            padding: 1rem 1.25rem;
            background: #f8fafc;
            border-radius: 0.375rem;
            border-left: 3px solid #cbd5e1;
            font-size: 0.95rem;
            line-height: 1.6;
        }

        /* --- RESTORED CSS FOR CARD FORMATTING --- */
        .analysis-section {
            background: linear-gradient(135deg, #f0f9ff, #e0f2fe);
            padding: 1.25rem 1.5rem;
            border-radius: 0.375rem;
            border: 1px solid #bae6fd;
            margin-bottom: 1rem;
        }

        .purpose-section {
            background: linear-gradient(135deg, #fffbf5, #fef5e7);
            padding: 1.25rem 1.5rem;
            border-radius: 0.375rem;
            border: 1px solid #fde8cc;
        }

        .section-label {
            color: #0c4a6e;
            font-weight: 600;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .purpose-section .section-label {
            color: #6b21a8;
        }

        .effect-text {
            color: #334155;
            line-height: 1.6;
            margin-bottom: 1rem;
            font-size: 0.95rem;
        }
         .effect-text:last-child {
            margin-bottom: 0;
        }

        .analysis-questions {
            color: #0c4a6e;
            font-weight: 600;
            margin-bottom: 0.625rem;
            font-size: 0.875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .questions-list {
            list-style: none;
            padding: 0;
        }

        .questions-list li {
            color: #334155;
            line-height: 1.6;
            margin-bottom: 0.5rem;
            padding-left: 1.25rem;
            position: relative;
            font-size: 0.925rem;
        }

        .questions-list li::before {
            content: '‚Ä¢';
            position: absolute;
            left: 0;
            color: #0c4a6e;
            font-weight: bold;
        }
        
        .purpose-item {
            margin-bottom: 0.875rem;
        }

        .purpose-item:last-child {
            margin-bottom: 0;
        }

        .purpose-item .purpose-heading {
            color: #7c3aed;
            font-weight: 600;
            font-size: 0.875rem;
            margin-bottom: 0.25rem;
        }

        .purpose-item .purpose-text {
            color: #334155;
            font-size: 0.9rem;
            line-height: 1.5;
            font-style: italic;
        }

        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            z-index: 1000;
            overflow-y: auto;
            padding: 2rem 1rem;
        }

        .modal-overlay.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            border-radius: 0.5rem;
            max-width: 900px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            margin: auto;
        }

        .modal-inner {
            padding: 2.5rem 3rem;
        }

        /* ADD THIS NEW SECTION */
        @media (max-width: 768px) {
            .modal-inner {
                padding: 1.5rem;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
            
            .modal-inner * {
                max-width: 100%;
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
        }

        .modal-close {
            position: sticky;
            top: 1.5rem;
            right: 1.5rem;
            float: right;
            background: #1e3a5f;
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            z-index: 1;
            margin-bottom: 1rem;
        }

        .modal-close:hover {
            background: #2c4a6f;
            transform: scale(1.1);
        }

        .hidden {
            display: none !important;
        }

        .no-results {
            text-align: center;
            padding: 4rem 2rem;
            color: #64748b;
            font-size: 1.1rem;
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            margin-bottom: 2.5rem;
        }
        @media (max-width: 768px) {
            body {
                padding: 1rem;
            }
            @media (max-width: 768px) {
                /* Fix search and flashcard button stacking */
                .controls {
                    flex-direction: column;
                    gap: 0.75rem;
                }

                .search-box {
                    width: 100%;
                    min-width: 100%;
                }

                .search-box input {
                    width: 100%;
                }

                .mode-toggle {
                    width: 100%;
                    text-align: center;
                    padding: 0.875rem 1rem;
                }

                .filter-controls {
                    flex-wrap: wrap;
                    justify-content: flex-start;
                }

                .category-filter {
                    flex: 0 1 auto;
                }
            }
            header,
            .daily-quote-section {
                padding: 1.5rem;
            }

            h1 {
                font-size: 1.75rem;
            }

            .collapsible-header span:first-child {
                font-size: 1.25rem;
            }

            .daily-quote-section blockquote {
                font-size: 1.1rem;
            }

            .gallery {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .feature-card {
                padding: 1.5rem;
            }

            .modal-overlay {
                padding: 1rem;
            }

            .modal-inner {
                padding: 1.5rem;
            }

            .modal-content {
                width: 95%;
                max-height: 85vh;
            }
        }

    </style>
</head>
<body class="is-sample">
    <div class="container">
        <header class="global-header">
            <nav class="global-nav">
                <a href="index.html" class="logo-link">
                    <img src="logo.png" alt="Learner Threads Logo">
                    <span>Learner Threads</span>
                </a>
                <div class="nav-links">
                    <div class="nav-links">
                        <a href="pricing.html">Pricing</a>
                        <a href="access.html">Access Tools</a>
                    </div>
            </nav>
        </header>
    <div class="page-header">
            <h1>Language Lens</h1>
            <p class="subtitle">Your guide to deep reading and meaningful text analysis.</p>
            
            <div class="upgrade-prompt">
                <p>Free version: 17 features  |  Full version: 50+ features with flashcards and bookmarking.</p>
            </div>

            <div class="controls">
                <div class="search-box">
                    <span class="search-icon">üîç</span>
                    <input type="text" id="searchInput" placeholder="Search features...">
                </div>  <!-- THIS CLOSING TAG IS MISSING! -->
                <button class="help-btn" id="helpBtn" onclick="openDispositionsModal()">
                    <span style="font-size: 1.2rem;">üí°</span> Dispositions and Text Analysis
                </button>
            </div>

            <div class="filter-controls" id="filterControls" style="margin-top: 1.5rem;">
                <button class="category-filter active" data-category="all">All Features</button>
            </div>
        </div>

        <main>
            <section class="daily-quote-section" id="dailyQuoteSection">
                <h2 class="collapsible-header" id="quoteHeader">
                    <span>Daily Quote Analysis üí°</span>
                    <span class="toggle-icon">‚ñº</span>
                </h2>
                <div class="collapsible-content" id="quoteContent">
                    <div class="quote-content">
                        <blockquote id="dailyQuoteText"></blockquote>
                        <cite id="dailyQuoteSource"></cite>
                    </div>
                    <div id="dailyQuoteAnalysis"></div>
                </div>
            </section>

            <div class="gallery" id="gallery"></div>
            <div class="no-results hidden" id="noResults">No features found matching your search or filter.</div>
            
        </main>
        
        <footer class="global-footer">
            <p>&copy; 2025 Learner Threads | <a href="mailto:bevan@learnerthreads.com">Contact Support</a></p>
        </footer>
    </div>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content" id="modalContent">
            <div class="modal-inner">
                <button class="modal-close" id="modalClose">&times;</button>
                <div id="modalBody"></div>
            </div>
        </div>
    </div>

    <script>
    // Feature list shortened for sample version
    const features = [
        {
            name: "Alliteration",
            category: "Sound Devices",
            definition: "The repetition of the same initial consonant sound in words that are close together in a phrase or sentence.",
            example: "Peter Piper picked a peck of pickled peppers.",
            effect: "Creates rhythm and draws attention to specific words or ideas.",
            questions: [
                "Pay Attention: Which initial consonant sound is being repeated, and in which words?",
                "Use Your Imagination: Say the phrase aloud - is the sound harsh and percussive, or soft and flowing?",
                "Think Critically: Why did the writer want to emphasise these particular words through sound?"
            ],
            purposes: {
                connect: "How does this sound pattern draw on poetic or literary traditions you recognise?",
                understand: "What emotion or memory does this sound evoke in you as a reader?",
                recognise: "How does the writer use sound to make certain words stand out or stick in your mind?",
                question: "Does the pleasant or harsh sound influence how you feel about what's being described?"
            },
            proTip: "Connect the repeated sound to the mood. 'The harsh, plosive 'p' sound in 'Peter Piper picked' mimics the aggressive, almost violent action of picking.'"
        },
        {
            name: "Onomatopoeia",
            category: "Sound Devices",
            definition: "The use of words that imitate the sounds they describe.",
            example: "Buzz. Hiss. Pop.",
            effect: "Brings sounds to life, making the writing more dynamic and sensory.",
            questions: [
                "Pay Attention: What sound is being imitated by the word itself?",
                "Use Your Imagination: Hear the actual sound in your mind - how accurately does the word capture it?",
                "Think Critically: Why did the writer want readers to hear this moment rather than just see it described?"
            ],
            purposes: {
                connect: "How do sound words connect to the way we naturally describe our world?",
                understand: "How does hearing this sound immerse you more deeply in the experience?",
                recognise: "How does the writer use sound imitation to make the scene more vivid and immediate?",
                question: "Whose experience of sound is being prioritised - could others hear it differently?"
            }
        },
        {
            name: "Rhyme",
            category: "Sound Devices",
            definition: "The repetition of similar sounds in the final stressed syllables of two or more words, most often at the ends of lines in poems and songs.",
            example: "The cat sat on the mat / with a funny little hat.",
            effect: "Creates musical quality, structure, and makes ideas more memorable.",
            questions: [
                "Pay Attention: Which words rhyme, and what pattern do they create?",
                "Use Your Imagination: Read the lines without the rhyme - how does removing it change the feel?",
                "Think Critically: Why did the writer use rhyme here - for memory, music, or emphasis?"
            ],
            purposes: {
                connect: "How does rhyme connect this text to traditional forms of poetry or song?",
                understand: "What childhood memories or emotions does the rhyme evoke?",
                recognise: "How does the writer use rhyme to create structure and aid memory?",
                question: "Does the playful or serious tone of the rhyme affect how you take the message?"
            }
        },
        {
            name: "Hyperbole",
            category: "Figurative Language",
            definition: "The deliberate exaggeration of a statement for emphasis or effect.",
            example: "I've told you a million times.",
            effect: "Emphasises a point dramatically, often adding humour or intensity.",
            questions: [
                "Pay Attention: What is being exaggerated and how extreme is the overstatement?",
                "Use Your Imagination: What emotion or atmosphere does the exaggeration create for you?",
                "Think Critically: Why choose exaggeration over a literal statement‚Äîwhat effect is the writer after?"
            ],
            purposes: {
                connect: "How does exaggeration appear in tall tales, comedy, and everyday speech?",
                understand: "What emotion drives you to exaggerate in your own life?",
                recognise: "How does the writer use exaggeration to emphasise or entertain?",
                question: "Does the exaggeration hide or reveal the truth?"
            }
        },
        {
            name: "Metaphor",
            category: "Figurative Language",
            definition: "A direct comparison between two unlike things without using 'like' or 'as.' It states that one thing is another.",
            example: "The world is a stage.",
            effect: "Creates powerful connections and helps readers see things in new ways.",
            questions: [
                "Pay Attention: What two things are being compared and how are they described as the same?",
                "Use Your Imagination: What qualities from the comparison carry over to help you understand the subject?",
                "Think Critically: Why did the writer choose this particular comparison rather than stating it directly?"
            ],
            purposes: {
                connect: "How does this metaphor draw on familiar cultural or literary references?",
                understand: "What new way of seeing yourself or the world does this comparison offer?",
                recognise: "How does this metaphor shape your emotional or intellectual response?",
                question: "Whose worldview or values does this comparison reinforce or challenge?"
            }
        },
        {            
            name: "Rhetorical Question",
            category: "Figurative Language",
            definition: "A question asked for effect rather than to elicit an answer.",
            example: "Are we going to sit here and do nothing?",
            effect: "Provokes thought and engages the reader, often implying an obvious answer.",
            questions: [
                "Pay Attention: What question is being asked and what is the implied or obvious answer?",
                "Use Your Imagination: How does being questioned rather than told make you feel‚Äîchallenged, engaged, or manipulated?",
                "Think Critically: Does the 'obvious' answer really allow for other perspectives or does it shut them down?"
            ],
            purposes: {
                connect: "How do rhetorical questions appear in speeches, debates, and persuasive texts?",
                understand: "How does being questioned make you feel - challenged, engaged, or manipulated?",
                recognise: "How does the writer use questions to guide you toward a particular answer?",
                question: "Does the 'obvious' answer really allow for other perspectives?"
            }
        },
        {
            name: "Enjambment",
            category: "Structural Devices",
            definition: "When a line of poetry continues without pause or punctuation into the next line, carrying the thought forward.",
            example: "I wandered lonely as a cloud / That floats on high o'er vales and hills.",
            effect: "Creates flow, builds momentum, and can reflect ongoing thought or action.",
            questions: [
                "Pay Attention: Where does the sentence or thought continue beyond the line break without pausing?",
                "Use Your Imagination: How does the flowing movement affect your pace and experience of reading?",
                "Think Critically: Why did the writer want this thought to spill over rather than pause at the line's end?"
            ],
            purposes: {
                connect: "How does this break from traditional poetry's line-by-line structure?",
                understand: "How does the flowing thought mirror the way your mind works?",
                recognise: "How does the writer control pacing and create suspense through line breaks?",
                question: "What expectations about poetry does this technique challenge or fulfill?"
            }
        },
        {
            name: "Foreshadowing",
            category: "Structural Devices",
            definition: "Hints or clues about events that will occur later in the narrative.",
            example: "There are dark clouds gathering on the horizon.",
            effect: "Builds anticipation, creates tension, and prepares readers for future events.",
            questions: [
                "Pay Attention: What hints or clues suggest something will happen later in the story?",
                "Use Your Imagination: What do you predict will happen based on these clues?",
                "Think Critically: Why did the writer plant this hint now‚Äîwhat does it prepare you to expect?"
            ],
            purposes: {
                connect: "How does foreshadowing connect to storytelling traditions and prophecy?",
                understand: "How does anticipating future events change your experience of the present?",
                recognise: "How does the writer plant clues to create suspense and structure?",
                question: "Does foreshadowing suggest fate and inevitability, or just careful planning?"
            }
        },
        {
            name: "Repetition",
            category: "Structural Devices",
            definition: "The simple act of repeating a word, phrase, or sentence.",
            example: "The politician promised change, change, and more change.",
            effect: "Emphasises key ideas and creates rhythm, building intensity or urgency.",
            questions: [
                "Pay Attention: What specific word, phrase, or idea is repeated and how many times?",
                "Use Your Imagination: How does the repetition affect your emotional response‚Äîdoes it convince or annoy you?",
                "Think Critically: Is the repetition being used to inspire and emphasize, or to manipulate and overwhelm?"
            ],
            purposes: {
                connect: "How does repetition connect to advertising, political slogans, or cultural mantras?",
                understand: "Does the repetition convince you or make you suspicious?",
                recognise: "How does the writer use repetition to persuade or manipulate?",
                question: "Is the repetition used to inspire or to overwhelm critical thinking?"
            }
        },
        {
            name: "Adjectives",
            category: "Parts of Speech",
            definition: "Descriptive words that modify nouns, providing specific details about their qualities, characteristics, or states.",
            example: "The <strong>ancient</strong>, <strong>weathered</strong> manuscript revealed secrets.",
            effect: "Add precision, create vivid imagery, and shape the reader's perception of people, places, or things.",
            questions: [
                "Pay Attention: Which specific qualities or characteristics do the adjectives emphasise?",
                "Use Your Imagination: Picture the subject without these adjectives - how does your mental image change?",
                "Think Critically: Why did the writer choose these particular descriptors rather than others?"
            ],
            purposes: {
                connect: "How do descriptive words shape cultural perceptions and stereotypes?",
                understand: "What emotions or judgments do these descriptive words trigger in you?",
                recognise: "How does the writer use selection of adjectives to guide your feelings?",
                question: "What biases or assumptions do these descriptive choices reveal?"
            }
        },
        {
            name: "Conjunctions",
            category: "Parts of Speech",
            definition: "Words that connect clauses, sentences, or words (and, but, or, because, although).",
            example: "She was tired, <strong>but</strong> she kept working.",
            effect: "Show relationships between ideas, create flow, and establish logical connections.",
            questions: [
                "Pay Attention: Which ideas or clauses are being connected, and what type of relationship does the conjunction show?",
                "Use Your Imagination: Try replacing the conjunction with a different one - how does 'and' vs. 'but' change the meaning?",
                "Think Critically: Why did the writer choose this particular logical connection between ideas?"
            ],
            purposes: {
                connect: "How do conjunctions reflect the way we naturally structure thought and argument?",
                understand: "How does the connection between ideas shape your understanding?",
                recognise: "How does the writer guide your thinking through these logical links?",
                question: "Does the logical connection presented hide other possible relationships?"
            }
        },
        {
            name: "Imperative",
            category: "Parts of Speech",
            definition: "A verb form used to give commands, instructions, or make requests. The subject 'you' is usually implied.",
            example: "Close the door. Be quiet. Pass the salt.",
            effect: "Creates directness, urgency, or authority by addressing the reader or listener directly.",
            questions: [
                "Pay Attention: What action is being commanded, and what tone does the command carry?",
                "Use Your Imagination: Picture yourself receiving this command - how does it make you feel?",
                "Think Critically: Why did the writer use a command rather than a request or suggestion?"
            ],
            purposes: {
                connect: "How do imperatives appear in instructions, commandments, and advertising?",
                understand: "How does being directly commanded make you feel?",
                recognise: "How does the writer use commands to assert authority or create urgency?",
                question: "Who has the power to give commands and who must obey?"
            }
        },
        {
            name: "Simple Sentence",
            category: "Sentences",
            definition: "A sentence with one independent clause containing a subject and verb, expressing a complete thought.",
            example: "The cat slept.",
            effect: "Creates clarity, emphasis, and directness through brevity.",
            questions: [
                "Pay Attention: What single, complete idea is being expressed?",
                "Use Your Imagination: Picture this sentence surrounded by longer, more complex sentences - what effect does its simplicity create?",
                "Think Critically: Why did the writer choose this simple structure rather than adding more detail or complexity?"
            ],
            purposes: {
                connect: "How do simple sentences mirror children's language and learning?",
                understand: "How does simplicity make you feel - clarity or oversimplification?",
                recognise: "How does the writer use simple sentences for emphasis or pacing?",
                question: "Does simplicity clarify or does it hide complexity?"
            }
        },
        {
            name: "Compound-Complex Sentence",
            category: "Sentences",
            definition: "A sentence with two or more independent clauses and at least one dependent clause.",
            example: "Although it was raining, we went for a walk, and we enjoyed ourselves.",
            effect: "Conveys multiple related ideas with sophistication and nuance.",
            questions: [
                "Pay Attention: How many independent clauses and dependent clauses make up this sentence?",
                "Use Your Imagination: Break this into separate simple sentences - what's lost when you remove the complexity?",
                "Think Critically: Why did the writer need this level of structural complexity to express the ideas?"
            ],
            purposes: {
                connect: "How do compound-complex sentences appear in formal or academic discourse?",
                understand: "How does the layered complexity mirror real-life situations?",
                recognise: "How does the writer handle multiple ideas and relationships simultaneously?",
                question: "Does the complexity add necessary nuance or create confusion?"
            }
        },
        {
            name: "Declarative Sentence",
            category: "Sentences",
            definition: "A sentence that makes a statement or provides information, ending with a full stop.",
            example: "The sky is blue.",
            effect: "Presents information as fact, establishing authority and clarity.",
            questions: [
                "Pay Attention: What information or claim is being stated as fact?",
                "Use Your Imagination: Hear this sentence spoken with different tones (confident, uncertain, aggressive) - how does tone affect its impact?",
                "Think Critically: Why did the writer choose to declare this rather than question or command it?"
            ],
            purposes: {
                connect: "How do declarative statements establish authority in textbooks and news?",
                understand: "How does stating something as fact affect your acceptance of it?",
                recognise: "How does the writer use statements to establish credibility?",
                question: "Who gets to declare what is true - what authority backs this claim?"
            }
        },
        {
            name: "Asyndeton",
            category: "Punctuation & Syntax",
            definition: "The omission or absence of conjunctions (like 'and', 'or', 'but') between parts of a sentence.",
            example: "I came, I saw, I conquered.",
            effect: "Creates a fast-paced, breathless rhythm. It can make a list feel more immediate, spontaneous, or overwhelming.",
            questions: [
                "Pay Attention: What items are listed without connecting conjunctions like 'and' or 'or'?",
                "Use Your Imagination: Hear the sentence spoken aloud - how does the rapid-fire pace sound and feel?",
                "Think Critically: Why did the writer remove conjunctions rather than using standard list structure?"
            ],
            purposes: {
                connect: "How is asyndeton used in powerful speeches or dramatic moments in film to create a sense of urgency?",
                understand: "How does the rapid-fire list make you feel as a reader? Overwhelmed? Energised?",
                recognise: "The writer is deliberately breaking a grammatical rule to manipulate rhythm for emotional effect.",
                question: "Does the rapid pace prevent you from thinking too deeply about any single item in the list?"
            }
        },
        {
            name: "Ellipsis",
            category: "Punctuation & Syntax",
            definition: "The use of three dots (...) to indicate an omission of words, a pause, or an unfinished thought.",
            example: "She looked out at the rain and whispered, 'If only...'",
            effect: "Creates suspense, indicates hesitation, or allows the reader to fill in the blank with their own imagination. It suggests something left unsaid.",
            questions: [
                "Pay Attention: What words or thoughts are being left unsaid or trailed off?",
                "Use Your Imagination: Fill in what might come after the ellipsis - what possibilities does it suggest?",
                "Think Critically: Why did the writer choose to leave this incomplete rather than stating it fully?"
            ],
            purposes: {
                connect: "How do we use pauses and unfinished sentences in our own speech to convey emotion or uncertainty?",
                understand: "How does the ellipsis make you, the reader, an active participant by forcing you to imagine what's missing?",
                recognise: "The writer is using punctuation to create atmosphere and engage the reader's imagination beyond the words on the page.",
                question: "Is the missing information a deliberate mystery, or does it signal a character's inability to express themselves?"
            }
        },
    ];

    const dailyQuotes = [
        {
            text: "The mass of men lead lives of quiet desperation.",
            author: "Henry David Thoreau",
            source: "Walden (1854)",
            techniques: ["Hyperbole", "Alliteration"],
            analysis: "Thoreau uses <strong>hyperbole</strong> to make the provocative claim that most people live in 'quiet desperation'. This exaggeration is amplified by the soft <strong>alliteration</strong> in 'lead lives', which adds to the sense of hushed, unspoken suffering. Together, these techniques create a powerful and memorable critique of conformity.",
            matters: "By moving beyond a simple observation to a grand, dramatic statement, Thoreau forces the reader to confront their own life. The analysis isn't just about societal critique; it's a personal challenge. It prompts us to question whether our own pursuit of stability and social acceptance has come at the cost of genuine fulfillment, turning a sociological observation into a timeless philosophical question about what it means to live an authentic life."
        },
        {
            text: "It was the best of times, it was the worst of times...",
            author: "Charles Dickens",
            source: "A Tale of Two Cities (1859)",
            techniques: ["Anaphora", "Antithesis", "Parallel Structure"],
            analysis: "Dickens employs <strong>anaphora</strong> by repeating the phrase 'it was the' to build a powerful, rhythmic cadence. This repetition structures a series of direct contrasts, or <strong>antithesis</strong> ('best'/'worst', 'wisdom'/'foolishness'). The use of <strong>parallel structure</strong> across these clauses gives the contradictions a sense of epic scale and balance.",
            matters: "This opening immediately establishes the novel's central theme of duality. Rather than presenting a simple view of the past, the language forces the reader to hold opposing ideas in their mind simultaneously. This complexity suggests that truth is not simple and that every era is defined by its contradictions, setting the stage for a story where personal and political loyalties are constantly in conflict."
        },
        {
            text: "Because I could not stop for Death ‚Äì He kindly stopped for me ‚Äì",
            author: "Emily Dickinson",
            source: "Poem 712 (c. 1863)",
            techniques: ["Personification", "Irony", "Caesura"],
            analysis: "Dickinson uses <strong>personification</strong> to portray Death as a polite gentleman in a carriage. This gentle image is contrasted with the reality of death, creating a profound <strong>irony</strong>. The <strong>caesura</strong> (the dash) creates a pause, forcing the reader to contemplate this strange, courteous image of mortality before the line concludes.",
            matters: "By transforming death from a terrifying force into a gentle suitor, the poem challenges our fundamental fears. The analysis shows how this gentle tone creates a contemplative mood, allowing the speaker to explore the journey towards the afterlife without fear. It reframes mortality not as an end, but as a transition, prompting a deeper reflection on the nature of eternity and our place within it."
        },
        {
            text: "I am no bird; and no net ensnares me: I am a free human being with an independent will.",
            author: "Charlotte Bront√´",
            source: "Jane Eyre (1847)",
            techniques: ["Metaphor", "Anaphora", "Declarative Sentence"],
            analysis: "Bront√´ rejects the <strong>metaphor</strong> of woman as bird (pretty, trapped, decorative). <strong>Anaphora</strong> with 'I am' builds power with each statement. The <strong>declarative sentences</strong> assert identity forcefully.",
            matters: "Jane is a poor, plain woman talking to a rich man, and she's saying 'I'm equal to you.' In 1847, this was radical‚Äîwomen were expected to be obedient and accept their place. Jane refuses to be seen as a pretty bird that can be caught and caged. She's saying 'I'm a person with my own thoughts and choices.' This speech works for anyone who's been told they should accept limitations because of who they are‚Äîtheir gender, class, background, or anything else. It's about refusing to let others define you."
        }
    ];

    const categories = ['all', ...new Set(features.map(f => f.category))];
    let currentCategory = 'all';
    let filteredFeatures = [...features];

    const gallery = document.getElementById('gallery');
    const searchInput = document.getElementById('searchInput');
    const noResults = document.getElementById('noResults');
    const filterControls = document.getElementById('filterControls');
    const modalOverlay = document.getElementById('modalOverlay');
    const modalClose = document.getElementById('modalClose');
    const modalBody = document.getElementById('modalBody');
    
    const quoteSection = document.getElementById('dailyQuoteSection');
    const quoteHeader = document.getElementById('quoteHeader');
    const dailyQuoteText = document.getElementById('dailyQuoteText');
    const dailyQuoteSource = document.getElementById('dailyQuoteSource');
    const dailyQuoteAnalysis = document.getElementById('dailyQuoteAnalysis');

    function displayDailyQuote() {
        function getDayOfYear() {
            const now = new Date();
            const start = new Date(now.getFullYear(), 0, 0);
            const diff = now - start;
            const oneDay = 1000 * 60 * 60 * 24;
            return Math.floor(diff / oneDay);
        }

        const dayIndex = getDayOfYear() % dailyQuotes.length;
        const quote = dailyQuotes[dayIndex];

        dailyQuoteText.innerHTML = `‚Äú${quote.text}‚Äù`;
        dailyQuoteSource.textContent = `‚Äî ${quote.author}, ${quote.source}`;
        
        const techniqueTagsHtml = quote.techniques.map(tech => 
            `<span class="technique-tag-link" data-feature="${tech}">${tech}</span>`
        ).join('');

        dailyQuoteAnalysis.innerHTML = `
            <div class="technique-tags">${techniqueTagsHtml}</div>
            <div class="analysis-section">
                <div class="section-label">Analysis</div>
                <div class="effect-text">${quote.analysis}</div>
            </div>
            <div class="purpose-section">
                <div class="section-label">Why it Matters</div>
                <div class="effect-text">${quote.matters}</div>
            </div>
        `;
    }

    quoteHeader.addEventListener('click', () => {
        quoteSection.classList.toggle('expanded');
    });

    dailyQuoteAnalysis.addEventListener('click', (e) => {
        const tag = e.target.closest('.technique-tag-link');
        if (tag) {
            const featureName = tag.dataset.feature;
            searchInput.value = featureName;
            filterByCategory('all');
            applyFilters();
            searchInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
            searchInput.focus();
        }
    });

    categories.forEach(cat => {
        if (cat === 'all') return;
        const btn = document.createElement('button');
        btn.className = 'category-filter';
        btn.dataset.category = cat;
        btn.textContent = cat;
        btn.addEventListener('click', (e) => filterByCategory(e.target.dataset.category));
        filterControls.appendChild(btn);
    });
    
    displayDailyQuote();
    renderGallery();

    function filterByCategory(category) {
        currentCategory = category;
        document.querySelectorAll('.category-filter').forEach(btn => {
            btn.classList.remove('active');
            if(btn.dataset.category === category) {
                btn.classList.add('active');
            }
        });
        document.querySelector('[data-category="all"]').classList.remove('active');
         if(category === 'all') {
            document.querySelector('[data-category="all"]').classList.add('active');
        }
        applyFilters();
    }

    function applyFilters() {
        const searchTerm = searchInput.value.toLowerCase();
        filteredFeatures = features.filter(f => {
            const matchesCategory = currentCategory === 'all' || f.category === currentCategory;
            const matchesSearch = !searchTerm || 
                f.name.toLowerCase().includes(searchTerm) ||
                f.definition.toLowerCase().includes(searchTerm) ||
                f.effect.toLowerCase().includes(searchTerm) ||
                f.category.toLowerCase().includes(searchTerm);
            return matchesCategory && matchesSearch;
        });
        renderGallery();
    }
    
    searchInput.addEventListener('input', applyFilters);

    function renderGallery() {
        gallery.innerHTML = '';
        if (filteredFeatures.length === 0) {
            noResults.classList.remove('hidden');
            gallery.classList.add('hidden');
            return;
        }
        noResults.classList.add('hidden');
        gallery.classList.remove('hidden');
        
        filteredFeatures.forEach((feature) => {
            const card = document.createElement('div');
            card.className = 'feature-card';
            const questionsList = feature.questions.map(q => `<li>${q}</li>`).join('');
            
            card.innerHTML = `
                <div class="category-tag">${feature.category}</div>
                <div class="feature-name">
                    <span>${feature.name}</span>
                </div>
                <div class="definition">${feature.definition}</div>
                <div class="example">${feature.example}</div>
                <div class="analysis-section">
                    <div class="section-label">Effect</div>
                    <div class="effect-text">${feature.effect}</div>
                    <div class="analysis-questions">When Analysing Language</div>
                    <ul class="questions-list">${questionsList}</ul>
                </div>
                <div class="purpose-section">
                    <div class="section-label">When Analysing Why This Matters, You Can</div>
                    <div class="purpose-item">
                        <div class="purpose-heading">Connect to the Wider World:</div>
                        <div class="purpose-text">${feature.purposes.connect}</div>
                    </div>
                    <div class="purpose-item">
                        <div class="purpose-heading">Understand Ourselves:</div>
                        <div class="purpose-text">${feature.purposes.understand}</div>
                    </div>
                    <div class="purpose-item">
                        <div class="purpose-heading">Recognise the Craft:</div>
                        <div class="purpose-text">${feature.purposes.recognise}</div>
                    </div>
                    <div class="purpose-item">
                        <div class="purpose-heading">Question the Text:</div>
                        <div class="purpose-text">${feature.purposes.question}</div>
                    </div>
                </div>
            `;
            
            card.addEventListener('click', (e) => {
                openModal(feature);
            });
            
            gallery.appendChild(card);
        });
    }

    function openModal(feature) {
        const questionsList = feature.questions.map(q => `<li>${q}</li>`).join('');
        modalBody.innerHTML = `
            <div class="category-tag">${feature.category}</div>
            <div class="feature-name"><span>${feature.name}</span></div>
            <div class="definition">${feature.definition}</div>
            <div class="example">${feature.example}</div>
            <div class="analysis-section">
                <div class="section-label">Effect</div>
                <div class="effect-text">${feature.effect}</div>
                <div class="analysis-questions">When Analysing Language</div>
                <ul class="questions-list">${questionsList}</ul>
            </div>
            <div class="purpose-section">
                <div class="section-label">When Exploring Why This Matters, You Can</div>
                <div class="purpose-item">
                    <div class="purpose-heading">Connect to the Wider World:</div>
                    <div class="purpose-text">${feature.purposes.connect}</div>
                </div>
                <div class="purpose-item">
                    <div class="purpose-heading">Understand Ourselves:</div>
                    <div class="purpose-text">${feature.purposes.understand}</div>
                </div>
                <div class="purpose-item">
                    <div class="purpose-heading">Recognise the Craft:</div>
                    <div class="purpose-text">${feature.purposes.recognise}</div>
                </div>
                <div class="purpose-item">
                    <div class="purpose-heading">Question the Text:</div>
                    <div class="purpose-text">${feature.purposes.question}</div>
                </div>
            </div>
        `;
        modalOverlay.classList.add('active');
        document.body.style.overflow = 'hidden';
        }

        function closeModal() {
            modalOverlay.classList.remove('active');
            document.body.style.overflow = '';
        }

        modalClose.addEventListener('click', closeModal);
        modalOverlay.addEventListener('click', (e) => {
            if (e.target === modalOverlay) closeModal();
        });

        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && modalOverlay.classList.contains('active')) {
                closeModal();
            }
        });

        document.querySelector('[data-category="all"]').addEventListener('click', (e) => filterByCategory(e.target.dataset.category));
        // Dispositions Modal Functions
        function openDispositionsModal() {
            const modal = document.getElementById('dispositionsModal');
            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeDispositionsModal() {
            const modal = document.getElementById('dispositionsModal');
            modal.classList.remove('active');
            document.body.style.overflow = '';
            localStorage.setItem('lensDispositionsViewed', 'true');
        }

        // Auto-show on first visit
        if (!localStorage.getItem('lensDispositionsViewed')) {
            setTimeout(() => openDispositionsModal(), 800);
        }

        // Close dispositions modal on background click
        document.getElementById('dispositionsModal').addEventListener('click', (e) => {
            if (e.target.id === 'dispositionsModal') {
                closeDispositionsModal();
            }
        });    
    </script>
</body>
</html>