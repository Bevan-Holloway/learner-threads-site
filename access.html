<script>
    // Define unique storage keys for each tool
    const ACCESS_KEYS = {
        lens: 'languageLensAccessCode',
        navigator: 'navigatorAccessCode',
        reflections: 'reflectionsAccessCode'
    };

    // Central map of codes to the tools they unlock
    const CODE_MAPPING = {
        // Single Product Codes
        'PC2025': { tools: ['lens'], redirect: 'lens.html' },
        'O$2TE@7B': { tools: ['lens'], redirect: 'lens.html' },
        'NAVIGATOR2025': { tools: ['navigator'], redirect: 'navigator.html' },
        'REFLECT2025': { tools: ['reflections'], redirect: 'reflections.html' },

        // Combo Codes (unlocks specific multiple tools)
        'COMBO2025': { tools: ['navigator', 'reflections'], redirect: 'dashboard.html' }, // REDIRECTS TO DASHBOARD

        // Bundle/Suite Code (unlocks all tools)
        'SUITE2025': { tools: ['lens', 'navigator', 'reflections'], redirect: 'bundle.html' }
    };

    function checkAccessCode() {
        const codeInput = document.getElementById('accessCode');
        const code = codeInput.value.trim();
        const errorMessage = document.getElementById('errorMessage');
        
        errorMessage.classList.remove('show');

        const entry = CODE_MAPPING[code];

        if (entry) {
            // Set access keys for all tools this code unlocks
            entry.tools.forEach(toolKey => {
                localStorage.setItem(ACCESS_KEYS[toolKey], code);
            });

            if (entry.tools.length > 1) {
                alert(`Success! You've unlocked multiple tools. You'll now be taken to your dashboard.`);
            }
            
            // Redirect to the correct page
            window.location.href = entry.redirect;

        } else {
            errorMessage.classList.add('show');
            codeInput.focus();
        }
    }
</script>